# UPI订阅支付的订阅计划创建

1. 请求地址:</br>
   https://{domain}/payment/mandate/create


2. 请求方式:</br>
   POST


3. Content-Type:</br>
   application/json; charset=utf-8


4. 参数说明</br>

|参数名|必选|类型| 说明                                                                              |
|--|--|--|---------------------------------------------------------------------------------|
|appId|是|string| 接入方应用id                                                                         |
|merchantTxnId|是|string| 创建当前订阅的唯一标识（最大长度不超过64位字符）                                                       |
|userId|是|string| 当前操作的用户id，作为用户的唯一标识符，与用户一一对应                                                    |
|email|是|string| 当前用户的邮箱，要求同一用户的姓名、电话号码和邮箱保持一致。                                                  |
|mobile|是|string| 当前用户的手机号，10位数字,**不要传+91**要求同一用户的姓名、电话号码和邮箱保持一致                                  |
|planId|是|string| 当前订阅计划所使用的套餐id，需要在商户后台创建，并通过审核之后才能使用，可通过套餐列表查询API查询可用套餐                         |
|startDate|是|string| 套餐开始时间，时间必须大于或等于当前时间，时区为印度时区（"GMT+5:30"或"Asia/Kolkata"）。时间格式为"yyyy-MM-dd HH:mm:ss" |
|endDate|是|string| 套餐结束时间，时区为印度时区（"GMT+5:30"或"Asia/Kolkata"）。时间格式为"yyyy-MM-dd HH:mm:ss"            |
|recurringTimes|是|integer| 订阅计划的扣款执行次数，如(一般一年期的订阅计划，扣款周期为每月扣款时，recurringTimes:12)                          |
|recurringAmount|是|string| 订阅计划的首次扣款金额，支持两位小数，单位卢比，如(199.00)                                                 |
|recurringMaxAmount|是|string| 单次扣款最大金额，后续扣款不能超过此金额，支持两位小数，单位卢比，如(399.00)                                              |
|billingCycle|是|integer| 订阅计划的扣款周期，枚举：0-daily,1-weekly,2-monthly,3-yearly,当前仅支持2-monthly,3-yearly      |
|signature|是|string| 签名，验签算法请参考```安全说明```文档                                                          ||



5. 请求参数示例

```json
{
  "appId": "0000000253",
  "merchantTxnId": "qwer123456",
  "userId": "userId01",
  "userName": "Mingur sherpa",
  "email": "8458517059@gmail.com",
  "mobile": "8458517059",
  "planId": "plan_id01",
  "startDate": "2025-09-30 10:13:15",
  "endDate": "2026-09-30 10:13:15",
  "recurringTimes": "12",
  "recurringAmount": "10",
  "billingCycle": "2",
  "signature": "ec038a938cc5cd1118690dc56981f579"
}
```


6. 响应数据示例
``` json
{
  "code": 200,
  "message": "success",
  "data": {
    "subscriptionId": "1972968484896264192",//订阅计划唯一id，渠道方当前订阅计划的唯一标志，重要数据，请务必保存并关联当前订阅计划
    "orderId": "ARTTXN1759227317716",// 渠道订单Id
    "upiIntentString": "upi://mandate?amrule=MAX&tn=InitMandate&validityend=30092026&mode=04&mn=Artstyle%20Plan%20Mandate&cu=INR&pn=SINEXAUTO1&purpose=14&tid=KJP250545cdace54b2ab31435eef8b01f59&pa=sinexinn@kotakpay&am=120.00&validitystart=30092025&recur=ASPRESENTED&tr=ARTTXN1759227317716&mc=7392&txnType=CREATE&rev=Y", // upi订阅的intent string，可唤醒app授权订阅并付款，亦可生成二维码通过扫码支付
    "uuid": "pv_33868dbadb5a8ad4", //当前订阅计划的另一唯一标志
    "merchantTxnId": "merchantTxnId123456", // 商户方创建当前订阅的唯一标识
    "recurringTimes": 12, // 扣款次数
    "recurringAmount": 10,// 扣款金额，实际上是首次扣款的执行金额
    "recurringMaxAmount": 100,// 每次扣款时可执行的最大金额
    "planAmount": 120, //当前订阅计划的总金额
    "startDate": "2025-09-30 10:15:00", //订阅计划开始时间
    "endDate": "2026-09-30 10:15:00"//订阅计划结束时间
  }
}
```
