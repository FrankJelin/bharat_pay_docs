# 订阅回调相关

1. 请求地址:</br>
   商户需要在商户后台-应用管理-配置回调地址，添加UPI订阅回调地址，添加后我们会回调改地址


2. 请求方式:</br>
   POST


3. Content-Type:</br>
   application/json; charset=utf-8


4. 回调类型</br>
###### 1. CREATE_MANDATE  订阅计划创建
```json
{
   "type": "CREATE_MANDATE", //订阅计划创建
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantTxnId": "merchantTxnId123",//商户订阅计划id
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "startDate": "2025-10-10 00:15:13",//订阅生效日期
   "endDate": "2026-10-10 00:15:12",//订阅到期日期
   "planAmount": "120",//计划扣款总金额
   "paidAmount": "0",//已付款金额
   "recurringAmount": "10",//周期扣款金额
   "recurringMaxAmount": "100",//最大扣款金额
   "recurringTimes": "12",//计划扣款次数
   "executeTimes": "0",//已经执行的扣款次数
   "billingCycle": "2"//计费周期:0-daily,1-weekly,2-monthly,3-yearly
}
```

###### 2. MANDATE_REVOKE  订阅计划撤销
```json
{
   "type": "MANDATE_REVOKE",
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantId": "0000000499",//商户id
   "merchantTxnId": "merchantTxnId123",//商户订阅计划id
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "startDate": "2025-10-10 00:15:13",//订阅生效日期
   "endDate": "2026-10-10 00:15:12",//订阅到期日期
   "planAmount": "120",//计划扣款总金额
   "paidAmount": "0",//已付款金额
   "recurringAmount": "10",//周期扣款金额
   "recurringMaxAmount": "100",//最大扣款金额
   "recurringTimes": "12",//计划扣款次数
   "executeTimes": "0",//已经执行的扣款次数
   "billingCycle": "2",//计费周期:0-daily,1-weekly,2-monthly,3-yearly
   "subscriptionStatus": "3"//订阅状态0未激活 1激活 2暂停 3失效 4到期
   
}
```

###### 3. MANDATE_PAUSE/MANDATE_UNPAUSE  订阅计划暂停/恢复
```json
{
   "type": "MANDATE_PAUSE",//MANDATE_PAUSE-暂停   MANDATE_UNPAUSE-恢复
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantId": "0000000499",//商户id
   "merchantTxnId": "merchantTxnId123",//商户订阅计划id
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "startDate": "2025-10-10 00:15:13",//订阅生效日期
   "endDate": "2026-10-10 00:15:12",//订阅到期日期
   "planAmount": "120",//计划扣款总金额
   "paidAmount": "0",//已付款金额
   "recurringAmount": "10",//周期扣款金额
   "recurringMaxAmount": "100",//最大扣款金额
   "recurringTimes": "12",//计划扣款次数
   "executeTimes": "0",//已经执行的扣款次数
   "billingCycle": "2",//计费周期:0-daily,1-weekly,2-monthly,3-yearly
   "subscriptionStatus": "2"//订阅状态0未激活 1激活 2暂停 3失效 4到期
}
```

###### 4. EXECUTE_MANDATE  订阅计划执行
```json
{
   "type": "EXECUTE_MANDATE",
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantId": "0000000499",//商户id
   "merchantOrderId": "merchantOrderId001",//商户触发扣款时的id
   "merchantTxnId": "merchantTxnId0001",//商户创建订阅计划时所传的id
   "orderId": "0000000253",//订单id
   "orderDate": "0000000253",//订单日期
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "executeTimes": "1",//已经执行的扣款次数
   "amount": "3.00",//扣款金额
   "orderFinishTime": "2025-02-05 10:00:05",//扣款完成时间
   "orderStatus": "2",//订单状态 0待扣款 1扣款中 2扣款成功 3扣款失败
   "platMessage": "platMessage",
   "utr": "147852369185"//utr
}
```

###### 5. NOTIFICATION_SENT  通知发送成功
```json
{
   "type": "NOTIFICATION_SENT",
   "merchantNotifyId": "merchantNotifyId001",//商户调用通知api时所传的唯一值
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantId": "0000000499",//商户id
   "merchantTxnId": "merchantTxnId123",//商户订阅计划id
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "startDate": "2025-10-10 00:15:13",//订阅生效日期
   "endDate": "2026-10-10 00:15:12",//订阅到期日期
   "planAmount": "120",//计划扣款总金额
   "paidAmount": "0",//已付款金额
   "recurringAmount": "10",//周期扣款金额
   "recurringMaxAmount": "100",//最大扣款金额
   "recurringTimes": "12",//计划扣款次数
   "executeTimes": "0",//已经执行的扣款次数
   "billingCycle": "2",//计费周期:0-daily,1-weekly,2-monthly,3-yearly
   "subscriptionStatus": "3"//订阅状态0未激活 1激活 2暂停 3失效 4到期
}
```

###### 6. MANDATE_COMPLETED  订阅计划已经完成
```json
{
   "type": "MANDATE_COMPLETED",
   "subscriptionId": "0000000253",//平台订阅计划id
   "merchantId": "0000000499",//商户id
   "merchantTxnId": "merchantTxnId123",//商户订阅计划id
   "appId": "0000000253",//应用id
   "userId": "userId01", //用户id
   "userName": "Mingur1564",//用户姓名
   "userVpa": "8276831583@axl",//用户扣款vpa
   "email": "8276831583@gmail.com",//邮箱
   "mobile": "8276831583",//手机号
   "planId": "planId01",//套餐id
   "startDate": "2025-10-10 00:15:13",//订阅生效日期
   "endDate": "2026-10-10 00:15:12",//订阅到期日期
   "planAmount": "120",//计划扣款总金额
   "paidAmount": "0",//已付款金额
   "recurringAmount": "10",//周期扣款金额
   "recurringMaxAmount": "100",//最大扣款金额
   "recurringTimes": "12",//计划扣款次数
   "executeTimes": "0",//已经执行的扣款次数
   "billingCycle": "2",//计费周期:0-daily,1-weekly,2-monthly,3-yearly
   "subscriptionStatus": "3"//订阅状态0未激活 1激活 2暂停 3失效 4到期
}
```

 


5. 响应数据示例
   收到回调信息返回小写的 success 收到success响应后，停止通知。
   没有收到则会通知10次，分别为0s,15s,15s,30s,3m,30m,30m,30m,30m,1h
